window.removeFocus = (element) => {
    try {
        element.blur();
    } catch (e) {
        console.log(e);
    }
};

window.webShareSupported = () => !!navigator.share;

window.shareArticle = async (text, url) => {
    if (!!navigator.share) {
        const shareData = {
            title: "Share an Article",
            text: text,
            url: url
        };

        try {
            await navigator.share(shareData);
        } catch (ex) {
            console.log(ex);
        }
    }
    else {
        alert('Sharing is not supported.');
    }
};

window.positionAt = async (element) => {
    if (element) {
        await window.scroll({ top: element.offsetTop, left: 0, behavior: "smooth" });
    }
};

window.addEventListener("online", notifyNetworkState);
window.addEventListener("offline", notifyNetworkState);

function notifyNetworkState() {
    if (notifyTo) {
        console.log("Notifying network connection change.");
        try {
            notifyTo.invokeMethodAsync("UpdateNetworkStatus", window.navigator.onLine);
        } catch (err) {
            console.log("Error while notifying network connection change - ", err);
        }
    }
}

var notifyTo;

window.addTo = (page) => {
    notifyTo = page;
    return window.navigator.onLine;
};

window.removeFrom = () => {
    console.log("Unsubscribed from network connection changes.");
    notifyTo = null;
};

window.readNetworkState = (page) => {
    notifyTo = page;
    console.log("Subscribed to network connection changes.");
    return window.navigator.onLine;
};